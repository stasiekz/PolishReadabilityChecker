FIND_PATH(Maca_INCLUDE_DIR libmaca/io/text.h /usr/include /usr/local/include )

FIND_LIBRARY(Maca_LIBRARY NAMES maca PATH /usr/lib /usr/local/lib) 

MARK_AS_ADVANCED(Maca_LIBRARY)
MARK_AS_ADVANCED(Maca_INCLUDE_DIR)


IF (Maca_INCLUDE_DIR AND Maca_LIBRARY)
   SET(Maca_FOUND TRUE)
ENDIF (Maca_INCLUDE_DIR AND Maca_LIBRARY)


IF (Maca_FOUND)
   set(Maca_VERSION 0.0.0)
   FIND_FILE(_Maca_VERSION_FILE libmaca/version.h ${Maca_INCLUDE_DIR})
   MARK_AS_ADVANCED(_Maca_VERSION_FILE)
   IF (_Maca_VERSION_FILE)
      FILE(READ ${_Maca_VERSION_FILE} _Maca_VERSION_CONENTS)
      STRING(REGEX REPLACE ".*#define LIBMACA_VERSION \\\"([0-9.]+)\\\".*" "\\1" Maca_VERSION "${_Maca_VERSION_CONENTS}")
   ENDIF (_Maca_VERSION_FILE)
   IF (Maca_FIND_VERSION)
      IF (Maca_VERSION VERSION_LESS Maca_FIND_VERSION)
         IF (Maca_FIND_REQUIRED)
            MESSAGE(FATAL_ERROR "Maca version too old: ${Maca_VERSION}, requested >= ${Maca_FIND_VERSION}")
         ELSE (Maca_FIND_REQUIRED)
            IF (NOT Maca_FIND_QUIETLY)
               MESSAGE(STATUS "Maca version too old: ${Maca_VERSION}, requested >= ${Maca_FIND_VERSION}")
            ENDIF (NOT Maca_FIND_QUIETLY)
         ENDIF (Maca_FIND_REQUIRED)
         set(Maca_FOUND False)
      ENDIF (Maca_VERSION VERSION_LESS Maca_FIND_VERSION)
   ENDIF (Maca_FIND_VERSION)
   IF (NOT Maca_FIND_QUIETLY)
      MESSAGE(STATUS "Found libmaca ${Maca_VERSION}: ${Maca_LIBRARY}")
   ENDIF (NOT Maca_FIND_QUIETLY)
ELSE (Maca_FOUND)
   IF (Maca_FIND_REQUIRED)
      MESSAGE(FATAL_ERROR "Could not find libmaca")
   ELSE (Maca_FIND_REQUIRED)
      MESSAGE(STATUS "libmaca not found")
   ENDIF (Maca_FIND_REQUIRED)
ENDIF (Maca_FOUND)
